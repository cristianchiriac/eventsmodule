<div class="query-builder form-inline">
    <div class="fill">

        <dl class="rules-group-container">
            <dt class="rules-group-header">
                <div class="btn-group group-conditions" ng-if="conditionCtrl.model.rules.length >= 1">
                    <label class="btn btn-xs btn-primary" ng-class="{active : (conditionCtrl.model.condition | uppercase) === 'AND', 'disabled': conditionCtrl.model.rules.length < 2}">
                        <input type="radio" id="condition-and" name="x_cond" value="AND" ng-model="conditionCtrl.model.condition"
                            ng-disabled="conditionCtrl.model.rules.length < 2"> AND </label>
                    <label class="btn btn-xs btn-primary" ng-class="{active : (conditionCtrl.model.condition | uppercase) === 'OR', 'disabled': conditionCtrl.model.rules.length < 2}">
                        <input type="radio" id="condition-or" name="x_cond" value="OR" ng-model="conditionCtrl.model.condition"
                            ng-disabled="conditionCtrl.model.rules.length < 2"> OR </label>
                </div>
            </dt>
            <dd class="rules-group-body">
                <ul class="rules-list">
                    <li class="rule-container" ng-repeat="item in conditionCtrl.model.rules">
                        <div class="rule-header">
                            <div class="btn-group pull-right rule-actions">
                                <a ng-click="addRule(object.rules, true)" class="btn btn-xs btn-success" ng-if="$last"><i
                                        class="glyphicon glyphicon-plus"></i> Add rule</a>
                                <a ng-click="addGroup(object, 'rules')" class="btn btn-xs btn-success" ng-if="$last"><i
                                        class="glyphicon glyphicon-plus-sign"></i> Add group</a>
                                <a class="btn btn-xs btn-danger" ng-click="remove(object.rules, $index)" ng-if="conditionCtrl.model.rules.length > 1 ">
                                    <i class="glyphicon glyphicon-remove"></i> Delete</a>
                            </div>
                        </div>
                        <div class="form-inline" ng-if="!item.rules">
                            <div class="form-group grow" ng-class="{'invalid': eventForm['action' + parentIndex + '_' + category + '_' + index + '_condition_xpath_' + $index].$invalid && eventForm.submitted}">
                                <input type="text" id="action{{parentIndex}}_{{category}}_{{index}}_condition_xpath_{{$index}}"
                                    name="action{{parentIndex}}_{{category}}_{{index}}_condition_xpath_{{$index}}"
                                    class="form-control" placeholder="Xpath" ng-model="item.xpath" required>
                            </div>
                            <div class="form-group" ng-class="{'invalid': eventForm['action' + parentIndex + '_' + category + '_' + index + '_condition_operator_' + $index].$invalid && eventForm.submitted}">
                                <select class="form-control" name="action{{parentIndex}}_{{category}}_{{index}}_condition_operator_{{$index}}"
                                    id="action{{parentIndex}}_{{category}}_{{index}}_condition_operator_{{$index}}"
                                    ng-options="operator as operator for operator in ['EQUAL', 'NOT_EQUAL', 'CONTAINS', 'NOT_CONTAINS', 'EXISTS', 'NOT_EXISTS']"
                                    ng-model="item.operator" required>
                                    <option></option>
                                </select>
                            </div>
                            <div class="form-group" ng-show="item.operator !== 'EXISTS' && item.operator !== 'NOT_EXISTS'"
                                ng-class="{'invalid': eventForm['action' + parentIndex + '_' + category + '_' + index + '_condition_value_' + $index].$invalid && eventForm.submitted} ">
                                <input type="text" id="action{{parentIndex}}_{{category}}_{{index}}_condition_value_{{$index}}"
                                    name="action{{parentIndex}}_{{category}}_{{index}}_condition_value_{{$index}}"
                                    class="form-control" placeholder="Value" ng-model="item.value" ng-required="item.operator !== 'EXISTS' && item.operator !== 'NOT_EXISTS'"
                                    validate-condition="item">
                            </div>
                        </div>
                        <conditions ng-if="item.rules" model="item"></conditions>
                    </li>
                </ul>
            </dd>
        </dl>
    </div>
</div>